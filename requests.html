<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุฅุฏุงุฑุฉ ุงูุทูุจุงุช | Request Management</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="global.css">
  <link rel="stylesheet" href="requests.css">
  <link rel="stylesheet" href="sidebar.css">
</head>

<body>

  <!-- Sidebar -->
  <div id="sidebar"></div>
  <script src="sidebar.js"></script>

  <!-- Unauthorized -->
  <div id="unauthorizedBox" class="unauthorized-box">
    <h2>๐ซ ุบูุฑ ูุฎููู ููุฏุฎูู</h2>
    <p>ูุฑุฌู ุงูุชูุงุตู ูุน ูุฏูุฑ ุงููุธุงู</p>
  </div>

  <!-- Page -->
  <main id="requestPageContent" class="task-page">

    <!-- Navbar -->
    <div class="top-nav glass">
      <div class="nav-left">
        <h1 class="nav-title">Request Management</h1>
        <p class="nav-sub">ุฅุฏุงุฑุฉ ููุชุงุจุนุฉ ุงูุทูุจุงุช</p>
      </div>

      <div class="nav-center">
        <h2 class="kb-title">Employee Requests</h2>
        <div class="live-pill">
          <span class="dot-live"></span>
          <span>Realtime</span>
        </div>
      </div>

      <div class="nav-right">
        <div class="task-actions">
          <!-- ๐ฅ ุฒุฑ ุชูุฑูุฑ -->
          <button id="reportBtn" class="btn-ghost">
            ๐ ุชูุฑูุฑ
          </button>

          <!-- ุฒุฑ ุฅูุดุงุก -->
          <button id="openCreateBtn" class="btn-primary">
            <span class="btn-ico">โ</span>
            <span>ุฅูุดุงุก ุทูุจ</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Board -->
    <section class="board">
      <div class="board-head">
        <h2 class="section-title2">ุงูุทูุจุงุช ุงูุญุงููุฉ</h2>

        <div class="board-tools">
          <div class="mini-stats">
            <div class="mini-chip">
              <span class="mini-dot inprog"></span>
              <span>In Progress</span>
              <strong id="countInProgress">0</strong>
            </div>
            <div class="mini-chip">
              <span class="mini-dot done"></span>
              <span>Done</span>
              <strong id="countDone">0</strong>
            </div>
          </div>
        </div>
      </div>

      <div class="columns">
        <div class="column float-in">
          <div class="column-header">
            <div class="col-left">
              <span class="col-title">In Progress</span>
              <span class="col-sub">ุทูุจุงุช ููุฏ ุงููุชุงุจุนุฉ</span>
            </div>
            <span class="col-count" id="countInProgressTop">0</span>
          </div>
          <div id="colInProgress" class="column-body"></div>
        </div>

        <div class="column float-in delay-1">
          <div class="column-header">
            <div class="col-left">
              <span class="col-title">Done</span>
              <span class="col-sub">ุทูุจุงุช ููุชููุฉ</span>
            </div>
            <span class="col-count" id="countDoneTop">0</span>
          </div>
          <div id="colDone" class="column-body"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- =========================
       Modal: Create Request (UPDATED)
  ========================== -->
  <div id="createOverlay" class="m-overlay">
    <div class="m-box pop">
      <div class="m-head">
        <div>
          <h2 class="m-title">ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ</h2>
          <p class="m-sub">ุฃุฏุฎู ุจูุงูุงุช ุงูุทูุจ</p>
        </div>
        <button class="m-x" id="createCloseX" aria-label="close">โ</button>
      </div>

      <div class="m-body">
        <div class="form-grid">
         <div class="form-group">
  <label>ุงุณู ุงูููุธู</label>

  <!-- Select -->
  <select id="cEmpSelect">
    <option value="">-- ุงุฎุชุฑ ููุธู --</option>
  </select>

  <!-- Input ูุฎูู ููุฅุถุงูุฉ ุงููุฏููุฉ -->
  <input type="text" id="cEmpName" placeholder="ุงุณู ููุธู ุฌุฏูุฏ" style="display:none">

  <!-- ุฒุฑ ุฅุถุงูุฉ -->
  <button type="button" id="addEmpBtn" class="btn-ghost mini-btn">โ ุฅุถุงูุฉ ููุธู</button>
</div>


          <div class="form-group">
            <label>Employee ID</label>
            <input type="text" id="cEmpId" placeholder="ูุซุงู: 1001">
          </div>

          <!-- ๐ฅ ุนููุงู ุงูุทูุจ Dropdown -->
          <div class="form-group">
            <label>ุนููุงู ุงูุทูุจ</label>
            <select id="cReqTitleSelect">
              <option value="">-- ุงุฎุชุฑ ุนููุงู ุงูุทูุจ --</option>
              <option>Task</option>
              <option>Update Knowledge Base</option>
              <option>Edit Knowledge Base</option>
              <option>New Notifications</option>
              <option>Update Notifications</option>
              <option>Remove Notifications</option>
              <option>New Employee Access Data</option>
              <option>Prepare Monthly Assessment</option>
              <option>Assessment Validation</option>
              <option>After Training Follow Up</option>
              <option>Trainees Coaching</option>
              <option>Check Quality Report</option>
              <option>Update Material</option>
              <option>New Material</option>
              <option>Email Of Access Data</option>
              <option>Email Of Rounds</option>
              <option>Email Of Coaching</option>
              <option>Training For New Employee</option>
              <option>Training For New & exist subcontractor</option>
              <option>Training For New Employee & exist Sales</option>
              <option>Other Task</option>
            </select>
          </div>

          <!-- ูุธูุฑ ููุท ุนูุฏ Other Task -->
          <div class="form-group" id="otherTitleGroup" style="display:none">
            <label>ุนููุงู ูุฎุตุต</label>
            <input type="text" id="cReqTitleCustom" placeholder="ุงูุชุจ ุงูุนููุงู ููุง...">
          </div>

          <div class="form-group" style="grid-column:1/-1">
            <label>ุชูุงุตูู ุงูุทูุจ</label>
            <input type="text" id="cReqDesc" placeholder="ุชูุงุตูู ุงูุทูุจ">
          </div>
        </div>

        <div class="hint-line">
          โ ุณูุชู ุฅูุดุงุก ุงูุทูุจ ูุจุงุดุฑุฉ ุถูู <b>In Progress</b> ูุน ุชุณุฌูู <b>ููุช ุงููุชุญ</b>.
        </div>
      </div>

      <div class="m-foot">
        <button id="createCancelBtn" class="btn-ghost">ุฅูุบุงุก</button>
        <button id="createSaveBtn" class="btn-primary">ุญูุธ</button>
      </div>
    </div>
  </div>

  <!-- =========================
       Modal: Update Request
  ========================== -->
  <div id="updateOverlay" class="m-overlay">
    <div class="m-box pop">
      <div class="m-head">
        <div>
          <h2 class="m-title">ุชุญุฏูุซ ุงูุทูุจ</h2>
          <p class="m-sub">ุชุนุฏูู ุงูุจูุงูุงุช ุฃู ุงูุญุงูุฉ</p>
        </div>
        <button class="m-x" id="updateCloseX" aria-label="close">โ</button>
      </div>

      <div class="m-body">
        <input type="hidden" id="uReqId">

        <div class="form-grid">
          <div class="form-group">
            <label>ุงุณู ุงูููุธู</label>
            <input type="text" id="uEmpName">
          </div>

          <div class="form-group">
            <label>Employee ID</label>
            <input type="text" id="uEmpId">
          </div>

          <div class="form-group">
            <label>ุนููุงู ุงูุทูุจ</label>
            <input type="text" id="uReqTitle">
          </div>

          <div class="form-group">
            <label>ุชูุงุตูู ุงูุทูุจ</label>
            <input type="text" id="uReqDesc">
          </div>

          <div class="form-group">
            <label>ุงูุญุงูุฉ</label>
            <select id="uReqStatus">
              <option value="in-progress">In Progress</option>
              <option value="done">Done</option>
            </select>
          </div>
        </div>

        <div class="hint-line">
          ุนูุฏ ุงุฎุชูุงุฑ <b>Done</b> ุณูุชู ุญูุธ <b>ููุช ุงูุฅุบูุงู</b> ุชููุงุฆูุงู โ
        </div>
      </div>

      <div class="m-foot">
        <button id="updateCancelBtn" class="btn-ghost">ุฅูุบุงุก</button>
        <button id="updateSaveBtn" class="btn-primary">ุญูุธ ุงูุชุนุฏูู</button>
      </div>
    </div>
  </div>

  <!-- =========================
       Modal: Confirm Delete
  ========================== -->
  <div id="confirmOverlay" class="m-overlay">
    <div class="m-box m-small pop">
      <div class="m-head">
        <div>
          <h2 class="m-title">ุชุฃููุฏ ุงูุญุฐู</h2>
          <p class="m-sub">ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุทูุจุ</p>
        </div>
        <button class="m-x" id="confirmCloseX" aria-label="close">โ</button>
      </div>

      <div class="m-body">
        <div class="confirm-info" id="confirmInfo"></div>
        <input type="hidden" id="confirmReqId">
      </div>

      <div class="m-foot">
        <button id="confirmCancelBtn" class="btn-ghost">ุฅูุบุงุก</button>
        <button id="confirmDeleteBtn" class="btn-danger">ุญุฐู</button>
      </div>
    </div>
  </div>

  <!-- =========================
       Modal: Request Details
  ========================== -->
  <div id="detailsOverlay" class="m-overlay">
    <div class="m-box pop details-box">
      <div class="m-head">
        <div>
          <h2 class="m-title">ุชูุงุตูู ุงูุทูุจ</h2>
          <p class="m-sub" id="dSub">ุนุฑุถ ูุงูู ูููุนูููุงุช</p>
        </div>
        <button class="m-x" id="detailsCloseX" aria-label="close">โ</button>
      </div>

      <div class="m-body">
        <input type="hidden" id="dReqId" />

        <div class="details-hero">
          <div class="details-title" id="dTitle">โ</div>
          <div class="details-badges">
            <span class="pill pill-progress" id="dStatus">In Progress</span>
            <span class="pill pill-id" id="dDocId">ID: โ</span>
          </div>
        </div>

        <div class="details-grid">
          <div class="d-card">
            <h4>๐ค ุงูููุธู</h4>
            <div class="d-val" id="dEmployee">โ</div>
          </div>

          <div class="d-card">
            <h4>๐ Employee ID</h4>
            <div class="d-val" id="dEmployeeId">โ</div>
          </div>

          <div class="d-card">
            <h4>๐ ููุช ุงููุชุญ</h4>
            <div class="d-val" id="dOpenedAt">โ</div>
          </div>

          <div class="d-card">
            <h4>โ ููุช ุงูุฅุบูุงู</h4>
            <div class="d-val" id="dDoneAt">โ</div>
          </div>

          <div class="d-card d-wide">
            <h4>๐ ุงูุชูุงุตูู</h4>
            <div class="d-desc" id="dDesc">โ</div>
          </div>
        </div>
      </div>

      <div class="m-foot details-actions">
        <button id="detailsDoneBtn" class="btn-primary">โ ุชู ุงูุฅูุฌุงุฒ</button>
        <button id="detailsEditBtn" class="btn-ghost">โ๏ธ ุชุนุฏูู</button>
        <button id="detailsDeleteBtn" class="btn-danger">๐๏ธ ุญุฐู</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <p>Developed by <strong>Jawad Kadhim. ALL RIGHTS RESERVED.</strong> ยฉ 2025</p>
  </footer>

  <script type="module" src="requests.js"></script>

  <!-- ๐น Title Select Logic -->
  <script>
    const titleSelect = document.getElementById("cReqTitleSelect");
    const otherGroup = document.getElementById("otherTitleGroup");

    if (titleSelect) {
      titleSelect.addEventListener("change", () => {
        if (titleSelect.value === "Other Task") {
          otherGroup.style.display = "block";
        } else {
          otherGroup.style.display = "none";
        }
      });
    }
  </script>
</body>
</html>
