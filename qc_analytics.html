<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QC Analytics | ุชููููุงุช ุงูููุธููู</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">

  <!-- Sidebar -->
  <link rel="stylesheet" href="sidebar.css">

  <!-- Page CSS -->
  <link rel="stylesheet" href="qc_analytics.css">
</head>

<body>

  <!-- Sidebar -->
  <div id="sidebar"></div>
  <script src="sidebar.js"></script>

  <!-- Page -->
  <main class="page qc-page" id="qcRoot">

    <!-- Top Header -->
    <section class="hero">
      <div class="hero-left">
        <h1>QC Evaluation Analytics</h1>
        <p>ุจุญุซ + ุชุญููู ุฃุฏุงุก ุงูููุธููู ูู ููู Excel ุนุจุฑ API</p>
      </div>

      <div class="hero-right">
        <div class="badge">
          <span class="dot"></span>
          <span id="apiStateText">Ready for API</span>
        </div>

        <button class="btn btn-ghost" id="btnRefresh">ุชุญุฏูุซ ุงูุจูุงูุงุช</button>
      </div>
    </section>

    <!-- Search Card -->
    <section class="card glass search-card">
      <div class="card-head">
        <div class="title">
          <span class="icon">๐</span>
          <div>
            <h2>ุจุญุซ ุงูููุธู</h2>
            <p>ุงูุชุจ ุฌุฒุก ูู ุงูุงุณู ูุญุฏุฏ ุงูุชุงุฑูุฎ (ุงุฎุชูุงุฑู)</p>
          </div>
        </div>

        <div class="right-actions">
          <button class="btn btn-primary" id="btnSearch">ุจุญุซ</button>
          <button class="btn btn-secondary" id="btnClear">ุชูุฑูุบ</button>
        </div>
      </div>

      <div class="filters">
        <div class="field">
          <label>ุงุณู ุงูููุธู</label>
          <input id="empNameInput" type="text" placeholder="ูุซุงู: Jawad Kadhum..." autocomplete="off" />
          <div class="hint">ุจุญุซ contains (ุฌุฒุก ูู ุงูุงุณู ูููู)</div>
        </div>

        <div class="field">
          <label>ูู ุชุงุฑูุฎ</label>
          <input id="fromDate" type="date" />
          <div class="hint">ุงุฎุชูุงุฑู</div>
        </div>

        <div class="field">
          <label>ุฅูู ุชุงุฑูุฎ</label>
          <input id="toDate" type="date" />
          <div class="hint">ุงุฎุชูุงุฑู</div>
        </div>

        <div class="field">
          <label>ูุตุฏุฑ ุงูุจูุงูุงุช</label>
          <select id="sourceSelect">
            <option value="api">API (ูุฑูุจุงู)</option>
            <option value="mock">Mock (ุชุฌุฑุจุฉ)</option>
          </select>
          <div class="hint">ุญุงููุงู Mock ุญุชู ูููู ุงูุฑุจุท</div>
        </div>
      </div>

      <div class="status-bar" id="statusBar">
        <span class="status-pill neutral" id="statusPill">ุฌุงูุฒ</span>
        <span class="status-text" id="statusText">ุงูุชุจ ุฌุฒุก ูู ุงุณู ุงูููุธู ูุงุถุบุท ุจุญุซ</span>
      </div>
    </section>

    <!-- Employee Summary -->
    <section class="card glass emp-summary hidden" id="empSummary">
      <div class="emp-title">
        <div class="avatar">๐ค</div>
        <div class="info">
          <h2 id="empTitle">โ</h2>
          <p id="empSub">โ</p>
        </div>
      </div>

      <div class="mini-stats">
        <div class="mini">
          <div class="k">ุนุฏุฏ ุงูุชููููุงุช</div>
          <div class="v" id="empCount">0</div>
        </div>
        <div class="mini">
          <div class="k">ูุชูุณุท ุงูุฏุฑุฌุฉ</div>
          <div class="v" id="empAvg">0%</div>
        </div>
        <div class="mini">
          <div class="k">ุขุฎุฑ ุชุงุฑูุฎ</div>
          <div class="v" id="empLast">โ</div>
        </div>
        <div class="mini">
          <div class="k">ุฃูุถู ุฏุฑุฌุฉ</div>
          <div class="v" id="empBest">โ</div>
        </div>
      </div>
    </section>

    <!-- Employee Insights -->
    <section class="card glass hidden" id="empInsights">
      <div class="card-head">
        <div class="title">
          <span class="icon">๐ง</span>
          <div>
            <h2>Employee Insights</h2>
            <p>Health Score + Trend + Badge</p>
          </div>
        </div>

        <div class="right-actions">
          <span class="pill" id="empBadge">โ</span>
          <span class="pill" id="empTrend">โ</span>
        </div>
      </div>

      <div class="insights-grid">
        <div class="insight big">
          <div class="k">Health Score</div>
          <div class="v" id="empHealthScore">โ</div>
          <div class="sub" id="empHealthSub">โ</div>
        </div>

        <div class="insight">
          <div class="k">ุขุฎุฑ ุชูููู</div>
          <div class="v" id="empLastScore">โ</div>
          <div class="sub" id="empLastVsAvg">โ</div>
        </div>

        <div class="insight">
          <div class="k">ุงูุชุฐุจุฐุจ</div>
          <div class="v" id="empVolatility">โ</div>
          <div class="sub">ูุฑู ุฃุนูู/ุฃุฏูู</div>
        </div>

        <div class="insight">
          <div class="k">ููุงุฑูุฉ (ุนุงู)</div>
          <div class="v" id="empVsTeam">โ</div>
          <div class="sub" id="empVsTeamSub">โ</div>
        </div>
      </div>
    </section>

    <!-- Employee Analytics Cards -->
    <section class="grid-4 hidden" id="empCards">
      <div class="card glass kpi">
        <div class="kpi-top">
          <span class="kpi-ico">๐</span>
          <span class="kpi-title">ุฃูุซุฑ ููุงุญุธุฉ ูุชูุฑุฑุฉ</span>
        </div>
        <div class="kpi-val" id="empMostNote">โ</div>
        <div class="kpi-sub" id="empMostNoteCount">โ</div>
      </div>

      <div class="card glass kpi">
        <div class="kpi-top">
          <span class="kpi-ico">๐</span>
          <span class="kpi-title">ุฃุนูู ุฏุฑุฌุฉ</span>
        </div>
        <div class="kpi-val" id="empHigh">โ</div>
        <div class="kpi-sub">ุถูู ุงููุชุฑุฉ ุงููุฎุชุงุฑุฉ</div>
      </div>

      <div class="card glass kpi">
        <div class="kpi-top">
          <span class="kpi-ico">๐</span>
          <span class="kpi-title">ุฃุฏูู ุฏุฑุฌุฉ</span>
        </div>
        <div class="kpi-val" id="empLow">โ</div>
        <div class="kpi-sub">ุถูู ุงููุชุฑุฉ ุงููุฎุชุงุฑุฉ</div>
      </div>

      <div class="card glass kpi">
        <div class="kpi-top">
          <span class="kpi-ico">โญ</span>
          <span class="kpi-title">ุงููุญูุฑ ุงูุฃุถุนู</span>
        </div>
        <div class="kpi-val" id="empWeakCat">โ</div>
        <div class="kpi-sub">ุฃูุซุฑ ูุญูุฑ ููุตุงู</div>
      </div>
    </section>

    <!-- โ Charts Section -->
    <section class="card glass hidden" id="chartsSection">
      <div class="card-head simple">
        <h2>Charts & Trend</h2>
        <p>Radar + Distribution + Tracking (All records)</p>
      </div>

      <div class="charts-grid">
        <div class="chart-box">
          <h3>๐ Trend (ุชุชุจุน ุงูุฏุฑุฌุงุช)</h3>
          <canvas id="trendChart"></canvas>
          <div class="trend-insight" id="trendInsight"></div>
        </div>

        <div class="chart-box">
          <h3>๐ธ Radar (ูุญุงูุฑ QC)</h3>
          <canvas id="radarChart"></canvas>
        </div>
      </div>

      <div class="chart-box" style="margin-top:18px">
        <h3>๐ Distribution (ุชูุฒูุน ุงูุฏุฑุฌุงุช)</h3>
        <canvas id="distChart"></canvas>
      </div>
    </section>

    <!-- Details Table -->
    <section class="card glass hidden" id="detailsCard">
      <div class="card-head simple">
        <h2>ุงูุชูุงุตูู</h2>
        <p>ูู ุณุฌูุงุช ูุฐุง ุงูููุธู (ูููุชุฑุฉ ุญุณุจ ุงูุชุงุฑูุฎ)</p>
      </div>

      <div class="table-wrap">
        <table class="tbl">
          <thead>
            <tr>
              <th>ุงูุชุงุฑูุฎ</th>
              <th>Call / SRC</th>
              <th>ุงููุชูุฌุฉ</th>
              <th>ุฃุถุนู ูุญูุฑ</th>
              <th>ููุงุญุธุฉ</th>
            </tr>
          </thead>
          <tbody id="detailsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- General Analytics -->
    <section class="card glass">
      <div class="card-head">
        <div class="title">
          <span class="icon">๐</span>
          <div>
            <h2>ุชุญููู ุนุงู</h2>
            <p>ุฅุญุตุงุฆูุงุช ุนูู ูุณุชูู ุฌููุน ุงูููุธููู</p>
          </div>
        </div>
        <button class="btn btn-ghost" id="btnGeneral">ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุนุงู</button>
      </div>

      <section class="grid-4">
        <div class="card glass kpi">
          <div class="kpi-top">
            <span class="kpi-ico">๐</span>
            <span class="kpi-title">ุฃุนูู ููุธู</span>
          </div>
          <div class="kpi-val" id="genTopEmp">โ</div>
          <div class="kpi-sub" id="genTopEmpSub">โ</div>
        </div>

        <div class="card glass kpi">
          <div class="kpi-top">
            <span class="kpi-ico">๐จ</span>
            <span class="kpi-title">ุฃุฏูู ููุธู</span>
          </div>
          <div class="kpi-val" id="genLowEmp">โ</div>
          <div class="kpi-sub" id="genLowEmpSub">โ</div>
        </div>

        <div class="card glass kpi">
          <div class="kpi-top">
            <span class="kpi-ico">๐</span>
            <span class="kpi-title">ุฃูุซุฑ ููุงุญุธุฉ ูุชูุฑุฑุฉ</span>
          </div>
          <div class="kpi-val" id="genMostNote">โ</div>
          <div class="kpi-sub" id="genMostNoteSub">โ</div>
        </div>

        <div class="card glass kpi">
          <div class="kpi-top">
            <span class="kpi-ico">๐</span>
            <span class="kpi-title">ุฃูุซุฑ ูุญูุฑ ุถุนู</span>
          </div>
          <div class="kpi-val" id="genWeakCat">โ</div>
          <div class="kpi-sub">ุนุงู ููู ุงูููุธููู</div>
        </div>
      </section>
    </section>

    <!-- Empty State -->
    <section class="empty hidden" id="emptyState">
      <div class="empty-card">
        <div class="emo">๐ญ</div>
        <h2>ูุง ุชูุฌุฏ ุจูุงูุงุช ุญุงููุงู</h2>
        <p>ุฌุฑูุจ ุชุบููุฑ ุงูุงุณู ุฃู ุงููุชุฑุฉ ุงูุฒูููุฉ.</p>
      </div>
    </section>

  </main>

  <!-- โ Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Page JS -->
  <script src="qc_analytics.js"></script>
</body>
</html>
