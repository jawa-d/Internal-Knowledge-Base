


<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            cairo: ['Cairo', 'sans-serif'],
          },
          colors: {
            primary: '#2563eb',
            accent: '#22c55e',
            danger: '#ef4444',
          },
          boxShadow: {
            glow: '0 0 0 1px rgba(255,255,255,0.08), 0 20px 40px rgba(0,0,0,0.15)'
          }
        }
      }
    }
  </script>

  <meta charset="UTF-8">
  <title>Dashboard</title>

  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="sidebar.css">
  <link rel="stylesheet" href="dashboard.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="font-cairo bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-slate-800 min-h-screen transition-colors">

<!-- Sidebar -->
<div id="sidebar"></div>
<script src="sidebar.js"></script>

<!-- Content -->
<div class="page dashboard-page relative">

  <!-- Header -->
  <div class="dash-header flex items-center justify-between mb-10">
    <div>
      <h1 class="text-3xl font-bold text-slate-800 dark:text-white">
        Dashboard
      </h1>
      <p class="text-slate-500 dark:text-slate-400 mt-1">
        Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…
      </p>
    </div>

    <!-- Logout -->
    <button
      id="logoutBtn"
      class="group flex items-center gap-2 px-5 py-2.5 rounded-2xl
             bg-gradient-to-r from-red-500 to-rose-600
             text-white shadow-lg
             hover:shadow-xl hover:-translate-y-0.5
             transition-all duration-300"
    >
      <span class="text-lg">ğŸšª</span>
      ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
    </button>
  </div>

  <!-- ================= KPI CARDS ================= -->
  <div class="cards grid gap-5 mb-10">

    <!-- Card -->
    <div onclick="location.href='users.html'"
         class="card group backdrop-blur-xl bg-white/70 dark:bg-slate-800/60
                border border-white/30 dark:border-white/10
                rounded-2xl p-5 flex items-center gap-4
                cursor-pointer shadow
                hover:shadow-glow hover:-translate-y-1
                transition-all duration-300">

      <div class="icon w-14 h-14 flex items-center justify-center rounded-xl
                  bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-xl">
        ğŸ‘¤
      </div>

      <div>
        <div class="text-xs text-slate-500 dark:text-slate-400">
          Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
        </div>
        <div class="number text-3xl font-bold text-slate-800 dark:text-white"
             id="usersCount">0</div>
      </div>
    </div>

    <!-- Copy Ù†ÙØ³ Ø§Ù„Ù‡ÙŠÙƒÙ„ -->
    <div onclick="location.href='shelves.html'"
         class="card group backdrop-blur-xl bg-white/70 dark:bg-slate-800/60
                border border-white/30 dark:border-white/10
                rounded-2xl p-5 flex items-center gap-4
                cursor-pointer shadow
                hover:shadow-glow hover:-translate-y-1
                transition-all duration-300">

      <div class="icon w-14 h-14 flex items-center justify-center rounded-xl
                  bg-gradient-to-br from-emerald-500 to-teal-600 text-white text-xl">
        ğŸ—‚
      </div>

      <div>
        <div class="text-xs text-slate-500 dark:text-slate-400">Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙÙˆÙ</div>
        <div class="number text-3xl font-bold text-slate-800 dark:text-white"
             id="shelvesCount">0</div>
      </div>
    </div>

    <div onclick="location.href='news.html'"
         class="card group backdrop-blur-xl bg-white/70 dark:bg-slate-800/60
                border border-white/30 dark:border-white/10
                rounded-2xl p-5 flex items-center gap-4
                cursor-pointer shadow
                hover:shadow-glow hover:-translate-y-1
                transition-all duration-300">

      <div class="icon w-14 h-14 flex items-center justify-center rounded-xl
                  bg-gradient-to-br from-orange-500 to-amber-600 text-white text-xl">
        ğŸ“°
      </div>

      <div>
        <div class="text-xs text-slate-500 dark:text-slate-400">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</div>
        <div class="number text-3xl font-bold text-slate-800 dark:text-white"
             id="newsCount">0</div>
      </div>
    </div>

    <div onclick="location.href='kpi_productivity.html'"
         class="card group backdrop-blur-xl bg-white/70 dark:bg-slate-800/60
                border border-white/30 dark:border-white/10
                rounded-2xl p-5 flex items-center gap-4
                cursor-pointer shadow
                hover:shadow-glow hover:-translate-y-1
                transition-all duration-300">

      <div class="icon w-14 h-14 flex items-center justify-center rounded-xl
                  bg-gradient-to-br from-purple-500 to-fuchsia-600 text-white text-xl">
        ğŸ“Š
      </div>

      <div>
        <div class="text-xs text-slate-500 dark:text-slate-400">Ù…Ø¤Ø´Ø±Ø§Øª KPI</div>
        <div class="number text-3xl font-bold text-slate-800 dark:text-white"
             id="kpiCount">0</div>
      </div>
    </div>

    <div onclick="location.href='exam.html'"
         class="card group backdrop-blur-xl bg-white/70 dark:bg-slate-800/60
                border border-white/30 dark:border-white/10
                rounded-2xl p-5 flex items-center gap-4
                cursor-pointer shadow
                hover:shadow-glow hover:-translate-y-1
                transition-all duration-300">

      <div class="icon w-14 h-14 flex items-center justify-center rounded-xl
                  bg-gradient-to-br from-pink-500 to-rose-600 text-white text-xl">
        ğŸ“
      </div>

      <div>
        <div class="text-xs text-slate-500 dark:text-slate-400">
          Ù…ÙˆØ¸ÙÙˆ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
        </div>
        <div class="number text-3xl font-bold text-slate-800 dark:text-white"
             id="examUsersCount">0</div>
      </div>
    </div>

  </div>

  <!-- ================= Charts ================= -->
  <div class="charts-grid grid gap-6">

    <div class="chart-card backdrop-blur-xl bg-white/80 dark:bg-slate-800/70
                border border-white/30 dark:border-white/10
                rounded-2xl p-4 shadow">
      <h3 class="text-sm text-center text-slate-600 dark:text-slate-300 mb-2">
        Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
      </h3>
      <canvas id="usersChart"></canvas>
    </div>

    <div class="chart-card backdrop-blur-xl bg-white/80 dark:bg-slate-800/70
                border border-white/30 dark:border-white/10
                rounded-2xl p-4 shadow">
      <h3 class="text-sm text-center text-slate-600 dark:text-slate-300 mb-2">
        Ø¹Ø¯Ø¯ Ø§Ù„Ø±ÙÙˆÙ
      </h3>
      <canvas id="shelvesChart"></canvas>
    </div>

    <div class="chart-card backdrop-blur-xl bg-white/80 dark:bg-slate-800/70
                border border-white/30 dark:border-white/10
                rounded-2xl p-4 shadow">
      <h3 class="text-sm text-center text-slate-600 dark:text-slate-300 mb-2">
        Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨
      </h3>
      <canvas id="booksChart"></canvas>
    </div>

    <div class="chart-card backdrop-blur-xl bg-white/80 dark:bg-slate-800/70
                border border-white/30 dark:border-white/10
                rounded-2xl p-4 shadow">
      <h3 class="text-sm text-center text-slate-600 dark:text-slate-300 mb-2">
        ØªØ·ÙˆØ± Ù…Ø¤Ø´Ø±Ø§Øª KPI
      </h3>
      <canvas id="kpiChart"></canvas>
    </div>

    <div class="chart-card backdrop-blur-xl bg-white/80 dark:bg-slate-800/70
                border border-white/30 dark:border-white/10
                rounded-2xl p-4 shadow">
      <h3 class="text-sm text-center text-slate-600 dark:text-slate-300 mb-2">
        Ù…ÙˆØ¸ÙÙˆ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† (Ø´Ù‡Ø±ÙŠ)
      </h3>
      <canvas id="examUsersChart"></canvas>
    </div>

  </div>

</div>
<script>
/* ===============================
   Animated Interactive Charts
   (ADDED ONLY â€“ no old code touched)
================================ */

function createGradient(ctx, color) {
  const g = ctx.createLinearGradient(0, 0, 0, 200);
  g.addColorStop(0, color + '55');
  g.addColorStop(1, color + '00');
  return g;
}

const baseOptions = {
  responsive: true,
  maintainAspectRatio: false,
  tension: 0.45,
  animation: {
    duration: 1400,
    easing: 'easeOutQuart'
  },
  plugins: {
    legend: { display: false },
    tooltip: {
      backgroundColor: '#0f172a',
      titleColor: '#fff',
      bodyColor: '#e5e7eb',
      padding: 10,
      cornerRadius: 10
    }
  },
  scales: {
    x: { grid: { display: false } },
    y: { beginAtZero: true }
  }
};

function renderLineChart(canvasId, data, color) {
  const el = document.getElementById(canvasId);
  if (!el) return;

  const ctx = el.getContext("2d");

  new Chart(ctx, {
    type: "line",
    data: {
      labels: ["Jan","Feb","Mar","Apr","May","Jun"],
      datasets: [{
        data,
        borderColor: color,
        backgroundColor: createGradient(ctx, color),
        fill: true,
        pointRadius: 4,
        pointHoverRadius: 7,
        pointBackgroundColor: color
      }]
    },
    options: {
      ...baseOptions,
      onClick: (_, elements) => {
        if (elements.length) {
          const index = elements[0].index;
          alert("Ø§Ù„Ù‚ÙŠÙ…Ø©: " + data[index]);
        }
      }
    }
  });
}

/* === INIT CHARTS === */
renderLineChart("usersChart",       [7,10,12,14,16,18], "#2563eb");
renderLineChart("shelvesChart",     [1,1,1,1,1,1],     "#22c55e");
renderLineChart("booksChart",       [1,1,1,1,2,3],     "#6366f1");
renderLineChart("kpiChart",         [1,1,1,2,4,5],     "#f59e0b");
renderLineChart("examUsersChart",   [6,10,12,14,16,18],"#0ea5e9");
</script>

<script type="module" src="dashboard.js"></script>
<script type="module">
  import { runAnnouncementPopup } from "./announcement_popup.js";
  runAnnouncementPopup();
</script>



</body>
</html>
